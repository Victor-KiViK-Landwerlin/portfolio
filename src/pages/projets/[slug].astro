---
import Layout from '../../layouts/Layout.astro';

const { slug } = Astro.params;

// Données exemple (à remplacer par PocketBase)
const projectsData: Record<string, any> = {
  "famille-dhier": {
    title: "Famille d'Hier",
    description: "Projet individuel réalisé en MMI1 S1.\nUne direction artistique simple et symbolique : formes géométriques naïves, pictogrammes familiaux, typographies manuelles. Comme une IA du futur essayait de représenter \"la famille\" de manière universelle.",
    role: "Webdesign éditorial · Intégration HTML | outils utilisés : Figma · Illustrator · HTML/CSS",
    image: "/images/famille-dhier-hero.jpg",
    images: [
      "/images/famille-dhier-1.jpg",
      "/images/famille-dhier-2.jpg",
      "/images/famille-dhier-3.jpg",
      "/images/famille-dhier-4.jpg"
    ],
    content: [
      {
        text: "Chaque élément culturel (film, livre, chanson) a été traité comme une \"preuve\" à documenter.\nL'objectif était de construire un système d'archives froid et analytique, où l'émotion se transforme en objet de musée.\nL'arborescence est volontairement réduite : une page = une couche de mémoire."
      },
      {
        images: ["/images/famille-dhier-mockup.jpg"]
      },
      {
        text: "Un site éditorial pensé mobile-first, lisible et fonctionnel.\nLe projet raconte une idée avant tout : un discours visuel et narratif cohérent, plus qu'une démonstration technique."
      }
    ],
    conclusion: "Ce projet m'a appris à structurer un discours visuel et éditorial de A à Z, et à privilégier le sens et la cohérence plutôt que la complexité technique."
  }
};

const project = projectsData[slug as string];

if (!project) {
  return Astro.redirect('/404');
}
---

<Layout title={project.title} currentPath={`/projets/${slug}`}>
  <!-- Titre du projet -->
  <section class="py-20 px-6">
    <div class="container mx-auto max-w-6xl">
      <h1 class="text-8xl font-bold text-kivik-green text-center mb-8">
        {project.title}
      </h1>
    </div>
  </section>

  <!-- Description principale -->
  <section class="py-12 px-6">
    <div class="container mx-auto max-w-4xl">
      <h2 class="text-4xl font-bold text-kivik-green mb-8 text-center">{project.title}</h2>
      
      <div class="space-y-4 text-lg mb-8">
        {project.description.split('\n').map((line: string) => (
          <p class="text-kivik-green">{line}</p>
        ))}
      </div>

      <p class="text-base text-kivik-green/80 italic">
        {project.role}
      </p>
    </div>
  </section>

  <!-- Image principale -->
  <section class="py-12 px-6 bg-amber-100/30">
    <div class="container mx-auto max-w-4xl">
      <div class="relative aspect-video bg-white p-8">
        <img 
          src={project.image}
          alt={project.title}
          class="w-full h-full object-contain"
        />
      </div>
      
      <div class="mt-8 text-lg text-kivik-green space-y-4">
        {project.content[0].text.split('\n').map((line: string) => (
          <p>{line}</p>
        ))}
      </div>
    </div>
  </section>

  <!-- Grille d'images -->
  <section class="py-12 px-6">
    <div class="container mx-auto max-w-6xl">
      <div class="grid md:grid-cols-2 gap-6">
        {project.images?.map((img: string) => (
          <div class="bg-white p-4 border-2 border-kivik-green">
            <img 
              src={img}
              alt={project.title}
              class="w-full h-auto"
            />
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Texte complémentaire -->
  <section class="py-12 px-6 bg-white/30">
    <div class="container mx-auto max-w-4xl">
      <div class="text-lg text-kivik-green space-y-4">
        {project.content[2]?.text.split('\n').map((line: string) => (
          <p>{line}</p>
        ))}
      </div>
    </div>
  </section>

  <!-- Conclusion -->
  <section class="py-12 px-6 pb-20">
    <div class="container mx-auto max-w-4xl">
      <p class="text-lg text-kivik-green italic">
        {project.conclusion}
      </p>

      <div class="mt-12 text-center">
        <a 
          href="/contact"
          class="inline-block px-8 py-3 bg-white border-2 border-kivik-green text-kivik-green font-medium rounded-none hover:bg-kivik-green hover:text-white transition-colors"
        >
          me contacter
        </a>
      </div>
    </div>
  </section>
</Layout>
